<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Password Creation Game</title>
  <style>
    :root {
      --bg-color: #f4f4f4;
      --text-color: #000;
      --box-bg: white;
      --box-shadow: 0 0 15px rgba(0, 153, 255, 0.4);
      --btn-bg: #007BFF;
      --btn-hover: #0056b3;
    }

    [data-theme="dark"] {
      --bg-color: #1e1e1e;
      --text-color: #e0e0e0;
      --box-bg: #2b2b2b;
      --box-shadow: 0 0 15px rgba(0, 200, 255, 0.4);
      --btn-bg: #3399ff;
      --btn-hover: #007acc;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      background-color: var(--box-bg);
      max-width: 600px;
      margin: auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: var(--box-shadow);
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    h2 {
      text-align: center;
    }

    label, input {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }

    input {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 10px;
      padding: 10px;
      width: 100%;
      background: var(--btn-bg);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: var(--btn-hover);
    }

    #message {
      color: red;
      text-align: center;
      margin-top: 10px;
    }

    #modeSwitcher {
      margin: 20px auto;
      display: block;
      background: #333;
      color: white;
      width: auto;
    }
  </style>
</head>
<body>
<button id="modeSwitcher">Switch to Dark Mode</button>
<div class="container">
  <h2 id="title">Create Your Password</h2>
  <div id="form"></div>
  <button id="submitBtn">Submit</button>
  <p id="message"></p>
  <button id="toggleMode">Switch to Login</button>
</div>

<script>
  const PROMPT_TIERS = {
    easy: [
      "What is your favorite color?", "What is your pet’s name?", "What is your favorite food?",
      "What city were you born in?", "What is your favorite drink?", "What’s your favorite day of the week?",
      "What’s your favorite dessert?", "What is your favorite season?", "What is your favorite animal?",
      "What is your birth month?", "What’s your shoe size?", "What’s your favorite number?",
      "What’s your favorite fruit?", "What is your lucky number?", "What’s your favorite TV show?",
      "What’s your favorite cartoon?", "What’s your favorite hobby?", "What’s your eye color?",
      "What’s your favorite flower?", "What is your favorite candy?"
    ],
    medium: [
      "What is your dream job?", "What was the name of your elementary school?", "What is your mother’s maiden name?",
      "What’s your father’s middle name?", "What’s your first car?", "What’s your high school mascot?",
      "What was your childhood nickname?", "What’s your best friend’s first name?", "What’s your favorite book?",
      "Who is your favorite teacher?", "Where did you go on your first trip?", "What’s the name of your first boss?",
      "What’s your favorite board game?", "Where was your first date?", "What’s your favorite restaurant?",
      "What’s the name of your hometown?", "What’s your favorite video game?", "What’s the last name of your first crush?",
      "Where did you go to college?", "What’s the make of your first laptop?"
    ],
    hard: [
      "What is your biggest fear?", "What is your most embarrassing moment?", "What is a secret no one knows about you?",
      "Describe your perfect day.", "What memory still haunts you?", "Who was your childhood hero?",
      "What’s something you regret not doing?", "What’s your biggest achievement?", "What’s a painful childhood memory?",
      "What personal belief has changed recently?", "What’s your most irrational fear?",
      "What’s the worst advice you ever got?", "What’s your biggest insecurity?", "What’s something you’ve never told anyone?",
      "Describe your first heartbreak.", "What event changed your life?", "Who has influenced you the most?",
      "What’s your deepest hope?", "What do you fear people knowing about you?", "What’s something you can’t forgive?"
    ]
  };

  let mode = 'create';
  let selectedPrompts = [];
  let expectedAnswers = {};
  const formDiv = document.getElementById('form');
  const submitBtn = document.getElementById('submitBtn');
  const toggleBtn = document.getElementById('toggleMode');
  const title = document.getElementById('title');
  const message = document.getElementById('message');
  const modeSwitcher = document.getElementById('modeSwitcher');

  function getTieredPrompts() {
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    return [
      pick(PROMPT_TIERS.easy),
      pick(PROMPT_TIERS.medium),
      pick(PROMPT_TIERS.hard)
    ];
  }

  function renderForm(prompts) {
    formDiv.innerHTML = '';
    prompts.forEach((prompt, index) => {
      const label = document.createElement('label');
      label.textContent = `[${["Easy", "Medium", "Hard"][index]}] ${prompt}`;
      const input = document.createElement('input');
      input.type = 'text';
      input.name = `q${index}`;
      input.dataset.prompt = prompt;
      formDiv.appendChild(label);
      formDiv.appendChild(input);
    });
  }

  function saveAnswers(data) {
    localStorage.setItem('passwordPrompts', JSON.stringify(data));
  }

  function loadSavedAnswers() {
    return JSON.parse(localStorage.getItem('passwordPrompts') || '{}');
  }

  function initCreateMode() {
    mode = 'create';
    title.textContent = "Create Your Password";
    toggleBtn.textContent = "Switch to Login";
    selectedPrompts = getTieredPrompts();
    renderForm(selectedPrompts);
    message.textContent = '';
  }

  function initLoginMode() {
    const saved = loadSavedAnswers();
    if (!saved || !saved.prompts) {
      message.style.color = 'red';
      message.textContent = "No stored password found. Please create one first.";
      return;
    }
    mode = 'login';
    title.textContent = "Login With Your Password";
    toggleBtn.textContent = "Switch to Create";
    selectedPrompts = saved.prompts;
    expectedAnswers = saved.answers;
    renderForm(selectedPrompts);
    message.textContent = '';
  }

  function handleSubmit() {
    const inputs = formDiv.querySelectorAll('input');
    const answers = {};
    let retry = false;
    let retryPrompts = [];

    inputs.forEach(input => {
      const prompt = input.dataset.prompt;
      const value = input.value.trim();
      if (mode === 'create') {
        answers[prompt] = value;
      } else {
        if (value !== expectedAnswers[prompt]) {
          retry = true;
          retryPrompts.push(prompt);
        }
      }
    });

    if (mode === 'create') {
      saveAnswers({ prompts: selectedPrompts, answers });
      message.style.color = 'green';
      message.textContent = "Password created successfully!";
    } else {
      if (retry) {
        message.style.color = 'red';
        message.textContent = "Some answers were incorrect. Try again.";
        renderForm(retryPrompts);
      } else {
        message.style.color = 'green';
        message.textContent = "Login successful!";
      }
    }
  }

  submitBtn.addEventListener('click', handleSubmit);

  toggleBtn.addEventListener('click', () => {
    mode === 'create' ? initLoginMode() : initCreateMode();
  });

  modeSwitcher.addEventListener('click', () => {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
    modeSwitcher.textContent = isDark ? 'Switch to Dark Mode' : 'Switch to Light Mode';
  });

  initCreateMode();
</script>
</body>
</html>
