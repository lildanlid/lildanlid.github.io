<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form System</title>
  <!-- Add Google Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    /* Previous CSS styles remain the same until .container */
    
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      opacity: 0;
      animation: fadeIn 0.5s ease-out forwards;
    }

    .card {
      background: var(--card);
      padding: 25px;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 200, 255, 0.3);
      opacity: 0;
      transform: translateX(-50px);
      animation: slideIn 0.5s ease-out forwards;
    }

    .formCard {
      background: var(--card);
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 8px;
      border-left: 4px solid var(--accent);
      opacity: 0;
      transform: translateX(-50px);
      animation: slideIn 0.5s ease-out forwards;
    }

    /* Animation keyframes */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Add animation delay for cascade effect */
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .formCard:nth-child(1) { animation-delay: 0.1s; }
    .formCard:nth-child(2) { animation-delay: 0.2s; }
    .formCard:nth-child(3) { animation-delay: 0.3s; }

    /* Material Icons styling */
    .material-icons {
      font-size: 24px;
      vertical-align: middle;
    }

    .icon-btn .material-icons {
      color: var(--text);
    }

    /* Rest of your existing styles remain the same */
  </style>
</head>
<body>
  <div class="navbar">
    <h2><span class="material-icons">description</span> MyFormApp</h2>
    <div class="navbar-icons">
      <button class="icon-btn" onclick="toggleTheme()">
        <span class="material-icons">dark_mode</span>
      </button>
      <button class="icon-btn" onclick="toggleStatusPopup()">
        <span class="material-icons">mail</span>
      </button>

      <!-- Rest of the navbar content remains the same -->
    </div>
  </div>

  <!-- Rest of your HTML structure remains the same -->
</body>
</html>
  <div id="statusPopup">
    <label>Check Your Status</label>
    <input type="text" id="checkUser" placeholder="Enter your name or ID">
    <button onclick="checkStatus()">
      <span class="material-icons">search</span> Check
    </button>
    <div id="userForms"></div>
  </div>

  <div class="container">
    <div class="card">
      <form id="formInput">
        <label for="username">Your Name or ID:</label>
        <input type="text" id="username" required>

        <label for="formType">Form Type:</label>
        <select id="formType">
          <option value="suggestion">Suggestion</option>
          <option value="bug">Bug Report</option>
        </select>

        <label for="content">Your Message:</label>
        <textarea id="content" required></textarea>

        <button type="submit">
          <span class="material-icons">send</span> Submit
        </button>
      </form>
    </div>

    <div class="card" id="dashboardSection" style="display:none;">
      <h3><span class="material-icons">dashboard</span> Admin Dashboard</h3>
      <label for="filterType">Filter by type:</label>
      <select id="filterType" onchange="renderForms()">
        <option value="all">All</option>
        <option value="suggestion">Suggestions</option>
        <option value="bug">Bug Reports</option>
      </select>
      <div id="formEntries"></div>
    </div>
  </div>

  <script>
    // Previous JavaScript remains the same until renderForms()

    function renderForms() {
      const entries = JSON.parse(localStorage.getItem("formEntries") || "[]");
      const filter = document.getElementById("filterType").value;
      const filtered = filter === "all" ? entries : entries.filter(e => e.type === filter);
      const container = document.getElementById("formEntries");
      container.innerHTML = "";

      if (filtered.length === 0) {
        container.innerHTML = "<p>No submissions.</p>";
        return;
      }

      filtered.reverse().forEach((entry, index) => {
        const div = document.createElement("div");
        div.className = "formCard";
        div.style.animationDelay = `${index * 0.1}s`;
        div.innerHTML = `
          <strong><span class="material-icons">person</span> User:</strong> ${entry.user}<br>
          <strong><span class="material-icons">label</span> Type:</strong> ${entry.type}<br>
          <strong><span class="material-icons">schedule</span> Date:</strong> ${entry.date}<br>
          <strong><span class="material-icons">message</span> Content:</strong><br><pre>${entry.content}</pre>
          <div class="status ${entry.status}">
            <span class="material-icons">${getStatusIcon(entry.status)}</span> Status: ${entry.status}
          </div>
          ${entry.reply ? `<div><strong><span class="material-icons">reply</span> Reply:</strong><pre>${entry.reply}</pre></div>` : ""}
          <label><span class="material-icons">edit</span> Reply:</label>
          <textarea id="reply-${entry.id}">${entry.reply || ""}</textarea>
          <button onclick="updateStatus(${entry.id}, 'approved')">
            <span class="material-icons">check_circle</span> Approve
          </button>
          <button onclick="updateStatus(${entry.id}, 'declined')">
            <span class="material-icons">cancel</span> Decline
          </button>
          <button onclick="saveReply(${entry.id})">
            <span class="material-icons">send</span> Save Reply
          </button>
          <button onclick="deleteForm(${entry.id})">
            <span class="material-icons">delete</span> Delete
          </button>
        `;
        container.appendChild(div);
      });
    }

    function getStatusIcon(status) {
      switch(status) {
        case 'approved': return 'check_circle';
        case 'declined': return 'cancel';
        default: return 'pending';
      }
    }

    function checkStatus() {
      const name = document.getElementById("checkUser").value.trim().toLowerCase();
      const container = document.getElementById("userForms");
      const userInboxKey = `userInbox_${name}`;
      const userForms = JSON.parse(localStorage.getItem(userInboxKey) || "[]");

      container.innerHTML = "";

      if (userForms.length === 0) {
        container.innerHTML = "<p>No submissions found.</p>";
        return;
      }

      userForms.reverse().forEach((e, index) => {
        const div = document.createElement("div");
        div.className = "formCard";
        div.style.animationDelay = `${index * 0.1}s`;
        div.innerHTML = `
          <strong><span class="material-icons">label</span> Type:</strong> ${e.type}<br>
          <strong><span class="material-icons">schedule</span> Date:</strong> ${e.date}<br>
          <strong><span class="material-icons">message</span> Content:</strong><pre>${e.content}</pre>
          <div class="status ${e.status}">
            <span class="material-icons">${getStatusIcon(e.status)}</span> Status: ${e.status}
          </div>
          ${e.reply ? `<div><strong><span class="material-icons">reply</span> Reply:</strong><pre>${e.reply}</pre></div>` : ""}
          <button onclick="deleteFromInbox(${e.id}, '${name}')">
            <span class="material-icons">delete</span> Remove
          </button>
        `;
        container.appendChild(div);
      });
    }

    // Add animation when elements are deleted
    function addRemoveAnimation(element) {
      return new Promise(resolve => {
        element.style.animation = 'slideOut 0.3s ease-out forwards';
        setTimeout(resolve, 300);
      });
    }

    async function deleteForm(id) {
      const element = document.querySelector(`[onclick="deleteForm(${id})"]`).closest('.formCard');
      await addRemoveAnimation(element);
      let entries = JSON.parse(localStorage.getItem("formEntries") || "[]");
      entries = entries.filter(e => e.id !== id);
      localStorage.setItem("formEntries", JSON.stringify(entries));
      renderForms();
      checkStatus();
    }

    async function deleteFromInbox(id, username) {
      const element = document.querySelector(`[onclick="deleteFromInbox(${id}, '${username}')"]`).closest('.formCard');
      await addRemoveAnimation(element);
      const key = `userInbox_${username}`;
      let inbox = JSON.parse(localStorage.getItem(key) || "[]");
      inbox = inbox.filter(e => e.id !== id);
      localStorage.setItem(key, JSON.stringify(inbox));
      checkStatus();
    }

    // Add slide out animation
    const styleSheet = document.styleSheet[0];
    styleSheet.insertRule(`
      @keyframes slideOut {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(50px);
        }
      }
    `, styleSheet.cssRules.length);
  </script>
</body>
</html>
