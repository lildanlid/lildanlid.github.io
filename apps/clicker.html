<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planet Clicker</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 240px;
      background: #222;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }
    .sidebar button {
      margin: 5px 0;
      padding: 10px;
      border: none;
      background: #333;
      color: #fff;
      cursor: pointer;
      border-radius: 12px;
    }
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .click-box {
      width: 300px;
      height: 300px;
      background: #333;
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      margin-bottom: 20px;
      cursor: pointer;
    }
    .click-box .arrow {
      position: absolute;
      top: 10px;
      font-size: 28px;
      cursor: pointer;
      user-select: none;
      color: white;
      background: none;
    }
    .click-box .arrow.left {
      left: 10px;
    }
    .click-box .arrow.right {
      right: 10px;
    }
    .click-button {
      padding: 15px 30px;
      background: #555;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 18px;
      margin-top: 20px;
    }
    .error-box {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #e74c3c;
      padding: 10px 20px;
      border-radius: 10px;
      display: none;
    }
    .section-toggle {
      display: flex;
      margin-top: 10px;
    }
    .section-toggle button {
      flex: 1;
      border: none;
      background: #333;
      color: #fff;
      padding: 10px;
      cursor: pointer;
      border-radius: 12px;
    }
    .floating-text {
      position: absolute;
      color: #0f0;
      font-weight: bold;
      animation: floatUp 1s ease-out forwards;
      pointer-events: none;
    }
    @keyframes floatUp {
      0% {
        opacity: 1;
        transform: translateY(0px);
      }
      100% {
        opacity: 0;
        transform: translateY(-50px);
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h3>Shop</h3>
    <div class="section-toggle">
      <button onclick="setShopSection('upgrades')">Upgrades</button>
      <button onclick="setShopSection('planets')">Planets</button>
      <button onclick="setShopSection('offline')">Offline</button>
    </div>
    <div id="shopSection">
      <button onclick="buyUpgrade('click')">Click Power (<span id="clickCost"></span>)</button>
      <button onclick="buyUpgrade('passive')">Passive Power (<span id="passiveCost"></span>)</button>
    </div>
    <h3>Leaderboard</h3>
    <div class="section-toggle">
      <button onclick="setLeaderboardType('energy')"><span class="material-icons">bolt</span></button>
      <button onclick="setLeaderboardType('money')"><span class="material-icons">attach_money</span></button>
      <button onclick="setLeaderboardType('time')"><span class="material-icons">timer</span></button>
    </div>
    <ul id="leaderboardList"></ul>
  </div>
  <div class="main">
    <div id="errorBox" class="error-box"></div>
    <div class="click-box" onclick="clickEnergy(event)">
      <span class="arrow left material-icons" onclick="event.stopPropagation(); prevPlanet();">arrow_back</span>
      <span id="planetName"></span>
      <span class="arrow right material-icons" onclick="event.stopPropagation(); nextPlanet();">arrow_forward</span>
    </div>
    <button class="click-button" onclick="clickEnergy(event)">Click</button>
    <h2><span class="material-icons">bolt</span> Energy: <span id="energy">0</span></h2>
  </div>
  <script>
    let energy = 0;
    let clickPower = 1;
    let passivePower = 0;
    let planetIndex = 0;
    let planets = [
      { name: "Earth", click: 1, price: 0 },
      { name: "Mars", click: 2, price: 1000 },
      { name: "Jupiter", click: 4, price: 10000 },
      { name: "Neptune", click: 8, price: 50000 }
    ];
    let clickLevel = 1;
    let passiveLevel = 0;
    let shopSection = 'upgrades';
    let offlineTime = 0;

    function setShopSection(section) {
      shopSection = section;
      const container = document.getElementById('shopSection');
      container.innerHTML = '';
      if (section === 'upgrades') {
        container.innerHTML = `
          <button onclick="buyUpgrade('click')">Click Power (<span id="clickCost"></span>)</button>
          <button onclick="buyUpgrade('passive')">Passive Power (<span id="passiveCost"></span>)</button>
        `;
      } else if (section === 'planets') {
        container.innerHTML = `<button onclick="buyNextPlanet()">Next Planet (<span id="planetCostShop"></span>)</button>`;
      } else if (section === 'offline') {
        container.innerHTML = `<button onclick="buyOfflineTime()">Buy Offline Time (Max 12H)</button>`;
      }
      updateUI();
    }

    function buyUpgrade(type) {
      let cost = type === 'click' ? clickLevel * 100 : (passiveLevel + 1) * 150;
      if (energy >= cost) {
        energy -= cost;
        if (type === 'click') clickLevel++;
        else passiveLevel++;
        updateUI();
        saveData();
      } else {
        showError('Not enough energy!');
      }
    }

    function buyNextPlanet() {
      if (planetIndex + 1 >= planets.length) return showError("No more planets!");
      let next = planets[planetIndex + 1];
      if (energy >= next.price) {
        energy -= next.price;
        planetIndex++;
        updateUI();
        saveData();
      } else {
        showError("Not enough energy for next planet!");
      }
    }

    function buyOfflineTime() {
      if (offlineTime >= 43200) return showError('Max offline time reached.');
      if (energy >= 1000) {
        offlineTime += 3600;
        if (offlineTime > 43200) offlineTime = 43200;
        energy -= 1000;
        showError('Offline time purchased: +1h');
        saveData();
        updateUI();
      } else {
        showError('Not enough energy for offline time.');
      }
    }

    function prevPlanet() {
      if (planetIndex > 0) {
        planetIndex--;
        updateUI();
      }
    }

    function nextPlanet() {
      if (planetIndex + 1 < planets.length) {
        showError("You must buy the next planet from the shop.");
      }
    }

    function clickEnergy(event) {
      let gain = planets[planetIndex].click * clickLevel;
      energy += gain;
      updateUI();
      saveData();

      // Create floating text
      const floatText = document.createElement('div');
      floatText.className = 'floating-text';
      floatText.innerText = `+${gain}`;

      const box = document.querySelector('.click-box');
      const rect = box.getBoundingClientRect();

      floatText.style.left = (event.clientX - rect.left - 10) + 'px';
      floatText.style.top = (event.clientY - rect.top - 10) + 'px';

      box.appendChild(floatText);
      setTimeout(() => floatText.remove(), 1000);
    }

    function updateUI() {
      document.getElementById('energy').innerText = energy;
      document.getElementById('planetName').innerText = planets[planetIndex].name;
      document.getElementById('clickCost').innerText = clickLevel * 100;
      document.getElementById('passiveCost').innerText = (passiveLevel + 1) * 150;
      document.getElementById('planetCostShop').innerText = planets[planetIndex + 1] ? planets[planetIndex + 1].price : 'N/A';
    }

    function showError(msg) {
      const box = document.getElementById('errorBox');
      box.innerText = msg;
      box.style.display = 'block';
      setTimeout(() => box.style.display = 'none', 3000);
    }

    function saveData() {
      const data = {
        energy,
        clickLevel,
        passiveLevel,
        planetIndex,
        offlineTime
      };
      localStorage.setItem('clickerSave', JSON.stringify(data));
    }

    function loadData() {
      const data = JSON.parse(localStorage.getItem('clickerSave'));
      if (data) {
        energy = data.energy;
        clickLevel = data.clickLevel;
        passiveLevel = data.passiveLevel;
        planetIndex = data.planetIndex;
        offlineTime = data.offlineTime;
      }
    }

    loadData();
    setShopSection('upgrades');
    updateUI();
    setInterval(() => {
      energy += passiveLevel;
      updateUI();
      saveData();
    }, 1000);
  </script>
</body>
</html>
