<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>RedStream - Free Movies & Shows</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #18131d;
      --card: #221526;
      --accent: #e50914;
      --text: #fff;
      --muted: #b3b3b3;
      --radius: 12px;
      --shadow: 0 4px 24px rgba(0,0,0,0.6);
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Roboto', Arial, sans-serif;
      min-height: 100vh;
    }
    header {
      background: var(--card);
      padding: 24px 8vw 16px 8vw;
      box-shadow: 0 2px 8px #0006;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      font-weight: 900;
      font-size: 2.2rem;
      letter-spacing: 1px;
      color: var(--accent);
    }
    .search-bar {
      position: relative;
      flex: 1;
      margin-left: 40px;
      max-width: 480px;
    }
    .search-bar input {
      width: 100%;
      padding: 10px 16px;
      font-size: 1.1rem;
      background: #2a1b2d;
      color: var(--text);
      border: none;
      border-radius: var(--radius);
      outline: none;
      box-shadow: 0 1px 6px #0006;
      transition: box-shadow 0.2s;
    }
    .suggestions {
      position: absolute;
      top: 100%;
      left: 0; right: 0;
      background: #23152a;
      border-radius: 0 0 var(--radius) var(--radius);
      box-shadow: 0 8px 24px #000c;
      z-index: 100;
      max-height: 260px;
      overflow-y: auto;
      display: none;
    }
    .suggestions.active {
      display: block;
    }
    .suggestions div {
      padding: 10px 16px;
      cursor: pointer;
      color: var(--text);
      border-bottom: 1px solid #311b33;
      font-size: 1rem;
    }
    .suggestions div:last-child {
      border-bottom: none;
    }
    .suggestions div:hover {
      background: var(--accent);
      color: #fff;
    }

    main {
      padding: 32px 8vw 40px 8vw;
      min-height: 70vh;
    }
    h2 {
      margin-top: 36px;
      color: var(--accent);
      font-size: 1.6rem;
      letter-spacing: 1px;
    }
    .section {
      margin-top: 32px;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
      gap: 28px;
    }
    .media-card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.13s, box-shadow 0.13s;
      display: flex;
      flex-direction: column;
    }
    .media-card:hover {
      transform: scale(1.03);
      box-shadow: 0 8px 32px #e5091470;
    }
    .media-card img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      background: #120815;
    }
    .media-card .info {
      padding: 14px 12px;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .media-card .title {
      font-weight: 700;
      font-size: 1.08rem;
      margin-bottom: 0.3em;
      color: #fff;
    }
    .media-card .meta {
      font-size: 0.97em;
      color: var(--muted);
      margin-bottom: 0.2em;
    }
    .media-card .genre {
      font-size: 0.95em;
      color: var(--accent);
      margin-top: 0.2em;
    }

    .player-modal {
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: #18131de6;
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s;
    }
    @keyframes fadeIn {
      0% { opacity: 0;}
      100% { opacity: 1;}
    }
    .player-container {
      width: 96vw; max-width: 740px;
      background: #1a131e;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 0 0 8px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }
    .player-header {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #fff;
      background: #150c1b;
      border-radius: var(--radius) var(--radius) 0 0;
      padding: 15px 24px;
      font-weight: bold;
      font-size: 1.15rem;
    }
    .close-btn {
      cursor: pointer;
      font-size: 1.8rem;
      color: var(--accent);
      background: none;
      border: none;
      outline: none;
      transition: color 0.18s;
    }
    .close-btn:hover {
      color: #fff;
    }
    video {
      width: 100%;
      border-radius: 0 0 var(--radius) var(--radius);
      background: #000;
      max-height: 55vh;
      min-height: 220px;
    }
    .video-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 8px 16px 0 16px;
      width: 100%;
      background: transparent;
    }
    .video-controls button, .video-controls input[type="range"], .video-controls select {
      background: #251522;
      border: none;
      border-radius: 6px;
      color: var(--text);
      font-size: 1.2rem;
      padding: 7px 10px;
      cursor: pointer;
      transition: background 0.18s, color 0.18s;
    }
    .video-controls button:hover, .video-controls select:hover {
      background: var(--accent);
      color: #fff;
    }
    .video-controls input[type="range"] {
      width: 80px;
      accent-color: var(--accent);
      height: 3px;
    }
    .video-controls select {
      font-size: 0.95rem;
    }
    .player-meta {
      color: var(--muted);
      font-size: 0.95em;
      margin: 10px 0 2px 24px;
      text-align: left;
      width: 100%;
    }

    @media (max-width: 800px) {
      main, header {
        padding-left: 16px;
        padding-right: 16px;
      }
      .player-container {
        width: 100vw;
        max-width: 100vw;
      }
      .media-card img {
        height: 180px;
      }
    }
    @media (max-width: 500px) {
      .logo { font-size: 1.4rem; }
      .media-card img { height: 120px; }
      .player-header, .player-meta { font-size: 1em; padding: 8px 10px; }
      .player-container { padding: 0; }
    }
  </style>
</head>
<body>
  <header>
    <span class="logo">RedStream</span>
    <div class="search-bar">
      <input id="searchInput" type="text" placeholder="Search movies, shows, documentaries..." autocomplete="off">
      <div class="suggestions" id="suggestionBox"></div>
    </div>
  </header>
  <main id="mainContent">
    <!-- Home content will be injected here -->
  </main>

  <!-- Player Modal -->
  <div class="player-modal" id="playerModal" style="display:none;">
    <div class="player-container">
      <div class="player-header">
        <span id="playerTitle"></span>
        <button class="close-btn" onclick="closePlayer()" title="Close">&times;</button>
      </div>
      <video id="mediaPlayer" controls poster="" preload="metadata">
        <source id="mediaSource" src="" type="video/mp4">
        <source id="mediaSourceLow" src="" type="video/mp4">
        Sorry, your browser doesn't support embedded videos.
      </video>
      <div class="video-controls">
        <button id="playPauseBtn" title="Play/Pause">&#9658;</button>
        <input type="range" id="volumeSlider" min="0" max="1" step="0.05" value="1" title="Volume">
        <button id="muteBtn" title="Mute">&#128263;</button>
        <button id="fullscreenBtn" title="Fullscreen">&#x26F6;</button>
        <select id="resolutionSelect" title="Resolution">
          <option value="high">HD</option>
          <option value="low">SD</option>
        </select>
      </div>
      <div class="player-meta" id="playerMeta"></div>
    </div>
  </div>

  <script>
    // --- Demo content data (replace with API or real data for actual use) ---
    const media = [
      {
        title: "The Public Domain Adventure",
        year: 2021,
        genres: ["Adventure", "Family"],
        type: "Movie",
        poster: "https://m.media-amazon.com/images/I/81Z8Fz8E0-L._AC_SY679_.jpg",
        description: "An epic adventure movie available for all. Join the journey of heroes in the world of open media.",
        video: "https://www.w3schools.com/html/mov_bbb.mp4", // Demo video
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["Adventure", "Family"],
        popularity: 98,
        watched: 1340000
      },
      {
        title: "Nature's Wonders - Documentary",
        year: 2019,
        genres: ["Documentary", "Nature"],
        type: "Documentary",
        poster: "https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?auto=compress&w=400",
        description: "Explore the natural beauty of our planet in this stunning documentary.",
        video: "https://www.html5rocks.com/en/tutorials/video/basics/devstories.webm", // Demo video
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["Nature", "Wildlife"],
        popularity: 87,
        watched: 910000
      },
      {
        title: "Open Sci-Fi Show",
        year: 2022,
        genres: ["Science Fiction", "Drama"],
        type: "Show",
        poster: "https://m.media-amazon.com/images/I/71f7idL+9wL._AC_SY679_.jpg",
        description: "A thrilling sci-fi series set in a universe where everything is open source.",
        video: "https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4",
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["Sci-Fi", "Space"],
        popularity: 90,
        watched: 770000
      },
      {
        title: "Mystery of the Lost Library",
        year: 2020,
        genres: ["Mystery", "History"],
        type: "Movie",
        poster: "https://images.pexels.com/photos/256455/pexels-photo-256455.jpeg?auto=compress&w=400",
        description: "A gripping mystery movie as explorers search for the lost library of Alexandria.",
        video: "https://www.w3schools.com/html/mov_bbb.mp4",
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["Mystery", "History"],
        popularity: 85,
        watched: 690000
      },
      {
        title: "The Laughing Class",
        year: 2018,
        genres: ["Comedy", "Show"],
        type: "Show",
        poster: "https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&w=400",
        description: "Comedy show featuring hilarious sketches and improv!",
        video: "https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4",
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["Comedy"],
        popularity: 80,
        watched: 590000
      },
      {
        title: "History Revisited",
        year: 2023,
        genres: ["Documentary", "History"],
        type: "Documentary",
        poster: "https://images.pexels.com/photos/207983/pexels-photo-207983.jpeg?auto=compress&w=400",
        description: "A documentary exploring pivotal moments in world history.",
        video: "https://www.w3schools.com/html/mov_bbb.mp4",
        video_sd: "https://www.w3schools.com/html/movie.mp4",
        themes: ["History", "Educational"],
        popularity: 78,
        watched: 420000
      }
    ];

    // --- Home Page ---
    function renderHome() {
      let main = document.getElementById('mainContent');
      let mostWatched = [...media].sort((a,b)=>b.watched-a.watched).slice(0,4);
      let themes = [...new Set(media.flatMap(m => m.themes))].slice(0,6);

      main.innerHTML = `
        <h2>Most Watched</h2>
        <div class="card-grid">${mostWatched.map(cardHTML).join('')}</div>
        <div class="section">
          <h2>Browse by Theme</h2>
          <div style="display:flex; flex-wrap:wrap; gap:14px; margin-top:10px;">
            ${themes.map(theme => `<button class="media-theme-btn" style="background: var(--accent); color: #fff; border:none; border-radius:8px; padding:8px 18px; font-size:1.05em; cursor:pointer;" onclick="searchTheme('${theme}')">${theme}</button>`).join('')}
          </div>
        </div>
        <div class="section">
          <h2>All Movies, Shows & Documentaries</h2>
          <div class="card-grid">${media.map(cardHTML).join('')}</div>
        </div>
      `;
      attachCardEvents();
    }

    function cardHTML(item, idx) {
      return `
        <div class="media-card" data-index="${media.indexOf(item)}">
          <img src="${item.poster}" alt="${item.title}">
          <div class="info">
            <div class="title">${item.title}</div>
            <div class="meta">${item.type} &bull; ${item.year}</div>
            <div class="genre">${item.genres.join(', ')}</div>
          </div>
        </div>
      `;
    }

    // --- Search ---
    const searchInput = document.getElementById('searchInput');
    const suggestionBox = document.getElementById('suggestionBox');

    searchInput.addEventListener('input', function(){
      const q = this.value.trim().toLowerCase();
      if (!q) {
        suggestionBox.classList.remove('active');
        return;
      }
      let suggestions = media.filter(m => 
        m.title.toLowerCase().includes(q) || 
        m.genres.join(',').toLowerCase().includes(q) ||
        m.type.toLowerCase().includes(q)
      ).sort((a,b)=>b.popularity-a.popularity).slice(0,8);

      if (suggestions.length) {
        suggestionBox.innerHTML = suggestions.map(item =>
          `<div data-index="${media.indexOf(item)}">${item.title} <span style="color:var(--muted); font-size:0.88em;">(${item.type})</span></div>`
        ).join('');
        suggestionBox.classList.add('active');
      } else {
        suggestionBox.innerHTML = '<div style="color:var(--muted);">No results found.</div>';
        suggestionBox.classList.add('active');
      }
    });

    suggestionBox.addEventListener('click', function(e){
      if (e.target.dataset && e.target.dataset.index !== undefined) {
        showMediaDetail(media[parseInt(e.target.dataset.index)]);
        suggestionBox.classList.remove('active');
        searchInput.value = "";
      }
    });

    searchInput.addEventListener('keydown', function(e){
      if (e.key === 'Enter' && suggestionBox.classList.contains('active')) {
        let first = suggestionBox.querySelector('div[data-index]');
        if (first) {
          showMediaDetail(media[parseInt(first.dataset.index)]);
          suggestionBox.classList.remove('active');
          searchInput.value = "";
        }
      }
    });

    document.addEventListener('click', function(e){
      if (!searchInput.contains(e.target) && !suggestionBox.contains(e.target)) {
        suggestionBox.classList.remove('active');
      }
    });

    // --- Show Media by Theme ---
    function searchTheme(theme) {
      let filtered = media.filter(m => m.themes.includes(theme));
      let main = document.getElementById('mainContent');
      main.innerHTML = `
        <h2>Theme: ${theme}</h2>
        <div class="card-grid">${filtered.map(cardHTML).join('')}</div>
        <div style="margin-top:20px;">
          <button onclick="renderHome()" style="background: none; color: var(--accent); border: none; font-size: 1.2em; text-decoration: underline; cursor: pointer;">&larr; Back to Home</button>
        </div>
      `;
      attachCardEvents();
    }

    // --- Media Detail and Player ---
    function attachCardEvents() {
      document.querySelectorAll('.media-card').forEach(card => {
        card.onclick = () => {
          let idx = parseInt(card.dataset.index);
          showMediaDetail(media[idx]);
        };
      });
    }

    function showMediaDetail(item) {
      // Show player modal
      document.getElementById('playerModal').style.display = 'flex';
      document.getElementById('playerTitle').textContent = item.title;
      document.getElementById('playerMeta').innerHTML =
        `${item.type} &bull; ${item.year} &bull; ${item.genres.join(', ')}<br>
        <span style="color:#fff;">${item.description}</span>`;

      let player = document.getElementById('mediaPlayer');
      player.poster = item.poster;
      document.getElementById('mediaSource').src = item.video;
      document.getElementById('mediaSourceLow').src = item.video_sd;
      document.getElementById('resolutionSelect').value = "high";
      player.load();
    }

    function closePlayer() {
      document.getElementById('playerModal').style.display = 'none';
      let player = document.getElementById('mediaPlayer');
      player.pause();
      player.currentTime = 0;
    }

    // --- Video Player Controls ---
    const player = document.getElementById('mediaPlayer');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const muteBtn = document.getElementById('muteBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const resolutionSelect = document.getElementById('resolutionSelect');

    playPauseBtn.onclick = () => {
      if (player.paused) {
        player.play();
      } else {
        player.pause();
      }
    };
    player.onplay = () => { playPauseBtn.innerHTML = "&#10073;&#10073;"; };
    player.onpause = () => { playPauseBtn.innerHTML = "&#9658;"; };

    volumeSlider.oninput = function() {
      player.volume = this.value;
      muteBtn.innerHTML = player.volume == 0 ? "&#128263;" : "&#128266;";
    };
    muteBtn.onclick = function() {
      player.muted = !player.muted;
      muteBtn.innerHTML = player.muted ? "&#128263;" : "&#128266;";
      volumeSlider.value = player.muted ? 0 : player.volume;
    };
    fullscreenBtn.onclick = function() {
      if (player.requestFullscreen) player.requestFullscreen();
      else if (player.webkitRequestFullscreen) player.webkitRequestFullscreen();
      else if (player.msRequestFullscreen) player.msRequestFullscreen();
    };
    resolutionSelect.onchange = function() {
      let high = document.getElementById('mediaSource');
      let low = document.getElementById('mediaSourceLow');
      let curTime = player.currentTime;
      let paused = player.paused;
      if (this.value === "high") {
        high.type = "video/mp4";
        low.type = "";
        player.load();
      } else {
        high.type = "";
        low.type = "video/mp4";
        player.load();
      }
      player.currentTime = curTime;
      if (!paused) player.play();
    };

    // Initial render
    renderHome();

    // Expose for inline handlers
    window.renderHome = renderHome;
    window.closePlayer = closePlayer;
    window.searchTheme = searchTheme;
    window.showMediaDetail = showMediaDetail;
  </script>
</body>
</html>
